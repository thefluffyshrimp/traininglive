define(["jquery","core/log"],function(a,b){return new function(){var c=null,d=null,e=null,f=function(a){var b=document.createElement("a");b.href=a;var c=b.protocol+"//"+b.hostname;return b.port&&(c+=":"+b.port),c};this.init=function(g,h){return d=g,c=h,h.adminurl?(e=f(h.adminurl),void a.getScript(e+"/integration/moodlerooms/ally.js").fail(function(){b.error("Failed to load Ally JS")})):void b.info("The Ally admin tool is not configured with a Launch URL. Aborting JS load.")},this.token=function(){return d},this.config=function(){return c},this.getAllyBaseUrl=function(){return e}}});